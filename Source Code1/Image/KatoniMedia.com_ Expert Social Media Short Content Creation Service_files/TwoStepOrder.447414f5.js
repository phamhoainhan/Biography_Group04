import{d as F,r as p,g as d,o as z,a as v,c as B,b as s,t as u,h as e,f as C,e as S,j as T,p as b,q as L}from"./entry.ccfebbe1.js";import{u as D}from"./composables.6e31dd6d.js";import{F as V}from"./FunnelServices.6e08424a.js";import{u as R}from"./index.98bfb2b5.js";import{l as A}from"./IntlTel.7d5c59dd.js";import{o as H}from"./optimize_script.3eba72ba.js";import"./helpers.9a9d5058.js";import"./v4.9a3e6124.js";import"./HLConst.c4c5e8b3.js";const M=b(()=>L(()=>import("./OrderFormStepOneV2.5cec7487.js"),["./OrderFormStepOneV2.5cec7487.js","./entry.ccfebbe1.js","./entry.78ab65b1.css","./v4.9a3e6124.js","./InputText.vue_vue_type_script_setup_true_lang.e9424c7f.js","./Button.cfdab3fe.js","./Countries.69e07731.js","./utils.c7339651.js","./helpers.9a9d5058.js","./index.98bfb2b5.js","./HLConst.c4c5e8b3.js","./FunnelServices.6e08424a.js","./FunnelServices.ac84ef2d.css","./MoonLoader.vue_vue_type_style_index_0_lang.15aaa70a.js","./MoonLoader.96f1220d.css","./Button.3e17a623.css","./InputSelect.vue_vue_type_script_setup_true_lang.0612f658.js","./IntlTel.7d5c59dd.js","./Attributions.46f38b13.js","./funnel_event_helper.bd666bbb.js","./Recaptcha.vue_vue_type_script_setup_true_lang.e4363a08.js","./composables.6e31dd6d.js","./optimize_script.3eba72ba.js","./index.78c17736.js","./OrderFormStepOneV2.0f714a32.css"],import.meta.url).then(o=>o.default||o)),N=b(()=>L(()=>import("./OrderFormStepTwoV2.c5413c1c.js"),["./OrderFormStepTwoV2.c5413c1c.js","./entry.ccfebbe1.js","./entry.78ab65b1.css","./v4.9a3e6124.js","./Button.cfdab3fe.js","./Countries.69e07731.js","./utils.c7339651.js","./helpers.9a9d5058.js","./index.98bfb2b5.js","./HLConst.c4c5e8b3.js","./FunnelServices.6e08424a.js","./FunnelServices.ac84ef2d.css","./MoonLoader.vue_vue_type_style_index_0_lang.15aaa70a.js","./MoonLoader.96f1220d.css","./Button.3e17a623.css","./OrderBump.vue_vue_type_script_setup_true_lang.03f100eb.js","./CollectJSCreditCard.vue_vue_type_script_setup_true_lang.cfde4486.js","./index.f9b9bd79.js","./components.3b8e1ae5.js","./composables.6e31dd6d.js","./Attributions.46f38b13.js","./index.78c17736.js","./index.300c6e54.css","./InputText.vue_vue_type_script_setup_true_lang.e9424c7f.js","./InputSelect.vue_vue_type_script_setup_true_lang.0612f658.js","./CollectJSCreditCard.e6a4f74e.css","./pure.607815f2.js","./orderform_helpers.f94c10b9.js","./optimize_script.3eba72ba.js","./funnel_event_helper.bd666bbb.js","./OrderFormStepTwoV2.8792c056.css"],import.meta.url).then(o=>o.default||o)),j=["id"],q={class:"form-title"},G={class:"form-step"},$={class:"form-heading active"},J={class:"form-sub-heading"},K={class:"form-step"},Q={class:"form-heading active"},U={class:"form-sub-heading"},W=s("i",{class:"fas fa-caret-up caret-up"},null,-1),X=[W],Y=["id"],ce=F({__name:"TwoStepOrder",props:{element:{type:Object}},setup(o){const c=o,m=p(!1),h=d(()=>{var n,a,r,l;return((l=(r=(a=(n=c.element)==null?void 0:n.extra)==null?void 0:a.step1)==null?void 0:r.value)==null?void 0:l.enableCountryPicker)===!0});console.log("---Two step order form---"),H(()=>{window!=null&&window.libphonenumber?m.value=!0:D(A(h,{intlTelFunc:()=>{h.value&&(m.value=!0)}}))});const i=p(!0),y=p([]),w=p({}),P=R(),_=d(()=>c.element.extra.step1.value),f=d(()=>c.element.extra.step2.value),g=d(()=>c.element.extra),I=d(()=>c.element.styles);z(()=>{O()});const E=n=>{i.value=!1,console.log("contact is",n),w.value=n},O=async()=>{var l,x;const{funnelId:n,stepId:a,locationId:r}=P.value;try{if(!r||!n||!a)throw new Error("Missing required params");const t=await V.listProducts({locationId:r,funnel:n,step:a});y.value=t==null?void 0:t.products}catch(t){const k=((x=(l=t==null?void 0:t.response)==null?void 0:l.data)==null?void 0:x.message)||(t==null?void 0:t.message)||"Not able to fetch products!";console.warn(k)}};return(n,a)=>{const r=M,l=N;return v(),B("div",{id:o.element.id,class:"container-order-form-two-step"},[s("div",q,[s("div",G,[s("span",$,u(e(_).headline),1),s("span",J,u(e(_).subHeadline),1)]),s("div",K,[s("span",Q,u(e(f).headline),1),s("span",U,u(e(f).subHeadline),1)])]),s("div",{class:C([{step2:!e(i)},"divider-form"])},X,2),s("div",{class:"form-body",id:`div-${o.element.extra.nodeId}`},[e(i)?(v(),S(r,{key:0,step1:e(_),extra:e(g),isIntlTelScriptLoaded:e(m),onGoToSecondStep:E},null,8,["step1","extra","isIntlTelScriptLoaded"])):T("",!0),e(i)?T("",!0):(v(),S(l,{key:1,step2:e(f),styles:e(I),extra:e(g),contact:e(w),productsRawData:e(y),onBack:a[0]||(a[0]=()=>i.value=!0)},null,8,["step2","styles","extra","contact","productsRawData"]))],8,Y)],8,j)}}});export{ce as default};
